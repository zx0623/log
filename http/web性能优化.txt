1.影响网络通信的决定性的因素
  延迟：分组从信息源发送到目的地所需要的时间。
  带宽：逻辑或物理通信路径最大的吞吐量
2.延迟
=> 消息（message）或分组（packet）从起点到终点经历的时间。
影响延迟的因素：
1.传播延迟
  消息从发送端到接受端需要的时间，是信号传播距离和速度的函数。
2.传输延迟
  把消息中的所有比特转移到链路中所需要的时间，是消息长度和链路速率的函数。
3.处理延迟
  处理分组首部，检查位错误及确定分组目标所需要的时间
4.排队延迟
  到来的分组排队等待处理的时间
延迟造成的原因：
传播时间取决于距离和信号通过的媒介，另外传播速度通常不超过光速。
传输延迟由传输链路的速率决定，与客户端到服务器的距离无关.
分组到达的速度超过了路由器的处理能力，那么分组就要在入站缓冲区排队。数据在缓冲区排队等待的时间，当然就是排队延迟。

CDN（content Deliverty Network,内容分发网络）：
=> 最主要的就是通过把内容部署到全球各地，让用户从最近的服务器加载内容，大幅度降低传播分组的时间。
=>ISP 
=> traceroute 测量延迟

IP(Internet Protocol )：负责联网主机之间的路由选址和寻址
TCP(Transmission Control Protocol 传输控制协议): 负责在不可靠的通信之上提供可靠的抽象层。 
采用 TCP 数据流可以确保发送的所有字节能够完整地被接收到，而且到达客户端的顺序也一样。  

三次握手
所有的TCP连接都要经历三次握手，
客户端与服务器在交换数据之前，必须就起始分组序号。
SYN 
客户端选择一个伪随机序列号x,并且发送一个SYN分组， SYN x= rand() 
SYN ACK 
并选择自己的一个随机序列号 y，追加自己的标志和选项，然 后返回响应。
ACK 
客户端给 x 和 y 加 1 并发送握手期间的最后一个ACK分组
三次握手完成后，客户端与服务器之间就可以通信了。 
客户端可以在发送 ACK分组之后立即发送数据，而服务器必须等接收到ACK分组之后才能发送数据。

流量控制：是一种预防发送端过多向接收端发送数据的机制。
为了实现流量控制，TCP连接每一方都要通告自己的接收窗口(rwnd)，其中包含能够保存数据的缓冲区空间大小的信息；

第一次建立连接时，二端都会使用自身系统默认设置来发送rwnd。
浏览器页面主要是通过从服务器向客户端下载数据，因此客户端窗口可能成为瓶颈
如果是在上传图片或视频，即客户端向服务器传送大量数据时，服务器的接收窗口又可能成为制约因素。

那它可以向发送端通告一个较小的窗口。 
假如窗口为零，则意味着必须由应用层先清空缓冲区，才能再接收剩余数据。
这个过程贯穿于每个TCP 连接的整个生命周期:每个ACK 分组都会携带相应的最新rwnd 值以便两端动态调整数据流速，使之适应发送端和接收端的容量及处理能力。

慢启动
首先，服务器通过TCP连接初始化一个新的拥塞窗口（cwnd）变量，将其值设置为一个系统设定的保守值。
.拥塞窗口大小
.发送端对从客户端接收确认(ACK)之前可以发送数据量的限制
.即客户端与服务器之 间最大可以传输(未经 ACK 确认的)数据量取 rwnd 和 cwnd 变量中的最小值

拥塞预防算法：把丢包作为网络拥塞的标志，即路径中某个连接或路由器已经拥堵了，以至于必须采取删包措施。
            因此，必须调整窗口大小，以避免造成更多的包丢失， 从而保证网络畅通。

TCP的常用优点：
1.基本的分组错误检测与纠正           
2.按序交付
3.丢包重发
4.以及保证网络最高效率的流量控制
5.拥塞控制和预防机制

队首阻塞：
产生的原因：因为按序交付

UDP:
无需按序交付数据 
处理分组丢失

Tcp 的优化建议：
• TCP 三次握手增加了整整一次往返时间;
• TCP 慢启动将被应用到每个新连接;
• TCP 流量及拥塞控制会影响所有连接的吞吐量;
• TCP 的吞吐量由当前拥塞窗口大小控制。

UDP(User Datagram Protocol,用户数据报协议)
数据报：一个完整、独立的数据实体，携带着从源节点到目的地节点的足够信息，对这些节点间之前的数据交换和传输网络没有任何依赖。
数据报和分组的区别：
数据报：只用来描述那些通过不可靠的服务传输的分组，既不保证送达，也不发送失败通知。
分组：可以用来指代任何格式化的数据块


web 性能优化，
1.延迟和带宽对web性能的影响
2.传输协议（TCP）对http 的限制
3.http协议自身的功能和缺陷
4.web应用的发展趋势以及对性能的需求
5.浏览器的局限性和优化思路

标记定义结构、样式表定义布局，
而脚本构建最终的交互式应用，响应用户输入，
并在交互期间创建样式表和标记。

性能优化的来源：计算，渲染，网络访问
web 应用主要涉及三个任务：获取资源，页面布局和渲染，JavaScript执行
渲染和脚本执行是一个线程上交错执行，不可能并发修改生成DOM。

针对浏览器的优化：
1.基于文档的优化，主要方法是有限获取资源，提前解析
2.推测性能优化
  浏览器可以学习用户的导航模式，执行推测性优化，尝试预测用户的下一次操作。
  然后，预先解析 DNS、预先连接可能的目标。
3.资源获取和排定的优先顺序
  文档、CSS 和 JavaScript 解析器可以与网络协议层沟通，声明每种资源的优先 级:初始渲染必需的阻塞资源具有最高优先级，
  而低优先级的请求可能会被临时 保存在队列中。
4.DNS预解析
  对可能的域名进行提前解析，避免将来 HTTP 请求时的 DNS 延迟。预解析可以 通过学习导航历史、用户的鼠标悬停，或其他页面信号来触发。
5.TCP预链接
  DNS 解析之后，浏览器可以根据预测的 HTTP 请求，推测性地打开 TCP 连接。 如果猜对的话，则可以节省一次完整的往返(TCP 握手)时间。
6.页面预渲染
  某些浏览器可以让我们提示下一个可能的目标，从而在隐藏的标签页中预先渲染 整个页面。这样，当用户真的触发导航时，就能立即切换过来。



  利用浏览器达到性能优化：
  1.css 和 javascript等重要资源应该尽早出现在文档中
  2.应该尽早交付css ,从而解除渲染并让javascript 执行
  3.非关键性的JavaScript应该推迟，从而避免阻塞DOM 和 CSSDOM构建
  4.HTML文档由解析器递增，从而保证可以间隙性的发送，以求得最佳性能。

  除了优化页面结构，还可以在文档中嵌入提示，以触发浏览器为我们采用其他优化 机制:
<link rel="dns-prefetch" href="//hostname_to_resolve.com"> ➊
  Firefox Chrome Safari IE
3.5+ N/A 1.0+ 1.0+ 5.01+ N/A 9+(预获取) N/A
3.5+ N/A 1.0+ 13+ N/A N/A 10+ 11+
<link rel="subresource"
<link rel="prefetch"
<link rel="prerender"
href="/javascript/myapp.js"> ➋ href="/images/big.jpeg"> ➌ href="//example.org/next_page.html"> ➍
➊ 预解析特定的域名
➋ 预取得页面后面要用到的关键性资源
➌ 预取得将来导航要用的资源
➍ 根据对用户下一个目标的预测，预渲染特定页面


